<UserControl x:Class="Snekken.View.BookingViewAdmin"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:uc="clr-namespace:Snekken.View"
             mc:Ignorable="d"
             
             d:DesignHeight="600" d:DesignWidth="900"
             Background="White">

    <Grid Margin="12">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*" />
            <!-- Left: list -->
            <ColumnDefinition Width="16" />
            <!-- Gutter -->
            <ColumnDefinition Width="3*" />
            <!-- Right: details -->
        </Grid.ColumnDefinitions>

        <!-- LEFT SIDE -->
        <Grid Grid.Column="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="81*"/>
                <ColumnDefinition Width="5*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="43.143"/>
                <RowDefinition Height="12.78"/>
                <!-- Title -->
                <RowDefinition Height="Auto"/>
                <!-- Search label -->
                <RowDefinition Height="Auto"/>
                <!-- Search field -->
                <RowDefinition Height="*"/>
                <!-- ListView fills the rest -->
            </Grid.RowDefinitions>

            <!-- Title-->
            <TextBlock Text="Bookinger" FontSize="20" FontWeight="Bold" Margin="1,8,12,10" Grid.Row="0" Grid.RowSpan="2" Grid.ColumnSpan="2"/>

            <!-- Search label -->
            <TextBlock Text="Søg:" FontSize="14" FontWeight="Regular" Margin="1,0,12,8" Grid.Row="2" Grid.ColumnSpan="2"/>

            <!-- Search field -->
            <TextBox Grid.Row="2" Height="20" Margin="0,30,0,8"
             FontSize="14"
             Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Grid.RowSpan="2" Grid.ColumnSpan="2"/>

            <!-- List of bookings -->
            <ListView Grid.Row="4"
              ItemsSource="{Binding FilteredBookings}"
              SelectedItem="{Binding SelectedBooking}"
              BorderThickness="1"
              BorderBrush="#DDD" Margin="0,3,0,0" Grid.ColumnSpan="2">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="5">
                            <TextBlock Text="Booking #" FontWeight="Bold"/>
                            <TextBlock Text="{Binding Id}" />
                            <TextBlock Text="{Binding StartTime, StringFormat='Start: {0:dd-MM-yyyy HH:mm}'}"/>
                            <TextBlock Text="{Binding EndTime, StringFormat='Slut:  {0:dd-MM-yyyy HH:mm}'}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>


        <Grid Margin="180 520 0 0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" 
                            Content="Ny booking" 
                            Width="100" 
                            Height="30" 
                            Margin="0 0 10 0" 
                            Background="Salmon"
                            Command="{Binding AddBookingCommand}"/>
        </Grid>

        <!-- RIGHT SIDE -->
        <Border Grid.Column="4"
                Padding="10"
                BorderBrush="#DDD"
                BorderThickness="1"
                Background="White" Grid.ColumnSpan="2">
            <StackPanel>

                <!-- Bookingno. (locked) -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 8" >
                    <TextBlock Text="Bookingnr:" FontWeight="SemiBold" Width="100"/>
                    <TextBox Text="{Binding SelectedBooking.Id}" IsReadOnly="True"  Width="300" Background="LightGray"/>
                </StackPanel>

                <!-- Name (dynamic) -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 8">
                    <TextBlock Text="Navn:" FontWeight="SemiBold" Width="100"/>
                    <TextBox Text="{Binding SelectedBooking.FormName}" Width="300" />
                </StackPanel>

                <!-- Email (dynamic) -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 8">
                    <TextBlock Text="Email:" FontWeight="SemiBold" Width="100"/>
                    <TextBox Text="{Binding SelectedBooking.FormEmail}" Width="300"/>
                </StackPanel>

                <!-- Phone (dynamic) -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 25">
                    <TextBlock Text="Telefon:" FontWeight="SemiBold" Width="100"/>
                    <TextBox Text="{Binding SelectedBooking.FormPhone}" Width="300"/>
                </StackPanel>

                <!-- Resource (locked) -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 8">
                    <TextBlock Text="Ressource:" FontWeight="SemiBold" Width="100"/>
                    <TextBox Text="{Binding SelectedBooking.ResourceTitle}" IsReadOnly="True" Width="300"  Background="LightGray"/>
                </StackPanel>

                <!-- Booking start (dynamic) -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 8">
                    <TextBlock Text="Bookingstart:" FontWeight="SemiBold" Width="100"/>
                    <TextBox Text="{Binding SelectedBooking.FormStart, StringFormat='{}{0:dd-MM-yyyy HH:mm}'}" Width="300"/>
                </StackPanel>

                <!-- Booking end (dynamic) -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 8">
                    <TextBlock Text="Bookingslut:" FontWeight="SemiBold" Width="100"/>
                    <TextBox Text="{Binding SelectedBooking.FormEnd, StringFormat='{}{0:dd-MM-yyyy HH:mm}'}" Width="300"/>
                </StackPanel>

                <!-- Demands (locked) -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 8">
                    <TextBlock Text="Krav:" FontWeight="SemiBold" Width="100" Height="80"/>
                    <TextBox Text="{Binding SelectedBooking.Requirements}" IsReadOnly="True" Width="300" Background="LightGray"/>
                </StackPanel>

                <!-- Price (locked) -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 12">
                    <TextBlock Text="Pris:" FontWeight="SemiBold" Width="100"/>
                    <TextBox Text="{Binding SelectedBooking.TotalPrice}" IsReadOnly="True" Width="300" Background="LightGray"/>
                </StackPanel>

                <!-- Checkboxes -->
                <Grid Margin="60 130 0 0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <!-- Checkbox left -->
                        <ColumnDefinition Width="*"/>
                        <!-- Text left -->
                        <ColumnDefinition Width="40"/>
                        <!-- Space between groups -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Checkbox right -->
                        <ColumnDefinition Width="*"/>
                        <!-- Text right -->
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <Grid.Resources>
                        <Style TargetType="CheckBox">
                            <Setter Property="Margin" Value="0,6,0,6"/>
                        </Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Margin" Value="6,6,0,6"/>
                        </Style>
                    </Grid.Resources>

                    <CheckBox Grid.Row="0" 
                              Grid.Column="0" 
                              VerticalAlignment="Center" 
                              IsChecked="{Binding SelectedBooking.FormRequirementFulfilled}"/>
                    <TextBlock Text="Krav opfyldt" 
                               Grid.Row="0" 
                               Grid.Column="1" 
                               Margin="6,6,0,6"/>

                    <CheckBox Grid.Row="1" 
                              Grid.Column="0" 
                              VerticalAlignment="Center"
                              IsChecked="{Binding SelectedBooking.FormIsPaid}"/>
                    <TextBlock Text="Betaling ok" 
                               Grid.Row="1" 
                               Grid.Column="1" 
                               Margin="6,6,0,6"/>

                    <!-- Right column -->
                    <CheckBox Grid.Row="0" 
                              Grid.Column="3" 
                              VerticalAlignment="Center"
                              IsChecked="{Binding SelectedBooking.IsCheckedOut}"/>
                    <TextBlock Text="Udleveret" 
                               Grid.Row="0" 
                               Grid.Column="4" 
                               Margin="6,6,0,6"/>

                    <CheckBox Grid.Row="1" 
                              Grid.Column="3" 
                              VerticalAlignment="Center"
                              IsChecked="{Binding SelectedBooking.IsReturned}"/>
                    <TextBlock Text="Returneret" 
                               Grid.Row="1" 
                               Grid.Column="4" 
                               Margin="6,6,0,6"/>
                </Grid>

                <!-- Buttons right side-->

                <Grid Margin="70 10 0 0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0" 
                            Content="Slet" 
                            Width="100" 
                            Height="30" 
                            Margin="0 0 10 0" 
                            Background="Salmon"
                            Command="{Binding DeleteBookingCommand}"/>

                    <Button Grid.Column="1" 
                            Content="Gem" 
                            Width="100" 
                            Height="30"   
                            Margin="50 0 10 0" 
                            Background="Salmon"
                            Command="{Binding UpdateBookingCommand}"/>
                </Grid>


            </StackPanel>
        </Border>
    </Grid>
</UserControl>
